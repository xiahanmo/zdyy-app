webpackJsonp([3],{"2Msk":function(t,e){},"2SRR":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("router-link",{attrs:{to:"/"}},[e("van-icon",{staticClass:"back-icon",attrs:{name:"arrow-left"}})],1),this._v(" "),e("span",{staticClass:"title"},[this._v("\n    城市选择\n  ")])],1)},staticRenderFns:[]};var s=i("VU/8")({name:"CityHeader"},n,!1,function(t){i("QnD3")},"data-v-0b97727c",null).exports,r=i("GQaK"),a={name:"CitySearch",props:{cities:Object},data:function(){return{keyword:"",list:[],timer:null}},computed:{hasNOData:function(){return!this.keyword.length}},methods:{handleCityClick:function(t){console.log(t),this.$store.dispatch("changeCity",t),this.$router.push("/"),this.keyword=""}},watch:{keyword:function(){var t=this;this.timer&&clearTimeout(this.timer),this.keyword?this.timer=setTimeout(function(){var e=[];for(var i in t.cities)t.cities[i].forEach(function(i){(i.name.indexOf(t.keyword)>-1||i.spell.indexOf(t.keyword)>-1)&&e.push(i)});t.list=e},100):this.list=[]}},mounted:function(){this.scroll=new r.a(this.$refs.search)}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"header"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"search-input",attrs:{type:"text",placeholder:"输入城市名或拼音"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.keyword,expression:"keyword"}],ref:"search",staticClass:"content"},[i("ul",[t._l(t.list,function(e,n){return i("li",{key:n,staticClass:"border-bottom",on:{click:function(i){t.handleCityClick(e.name)}}},[t._v(t._s(e.name))])}),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:t.hasNOData,expression:"hasNOData"}]},[t._v("没有更多匹配")])],2)])])},staticRenderFns:[]};var o=i("VU/8")(a,c,!1,function(t){i("PcvV")},"data-v-782c662f",null).exports,l=i("Dd8w"),u=i.n(l),h=i("NYxO"),d={name:"CityList",props:{cities:Object,hot:Array,letter:String},computed:u()({},Object(h.c)({currentCity:"city"})),mounted:function(){this.scroll=new r.a(this.$refs.ref)},methods:u()({handleCityClick:function(t){this.changeCityCommit(t),this.$router.push("/")}},Object(h.b)(["changeCityCommit"])),watch:{letter:function(){if(console.log(this.letter),this.letter){var t=this.$refs[this.letter][0];this.scroll.scrollToElement(t)}}}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"ref",staticClass:"wrapper"},[i("div",{staticClass:"content"},[i("h4",{staticClass:"border-topbottom"},[t._v("当前城市")]),t._v(" "),i("ul",[i("li",[i("span",[t._v(t._s(this.currentCity))])])]),t._v(" "),i("h4",{staticClass:"border-topbottom"},[t._v("一线城市")]),t._v(" "),i("ul",t._l(t.hot,function(e){return i("li",{key:e.id,on:{click:function(i){t.handleCityClick(e.name)}}},[i("span",[t._v(t._s(e.name))])])})),t._v(" "),t._l(t.cities,function(e,n){return i("div",{key:n},[i("h4",{ref:n,refInFor:!0,staticClass:"border-topbottom"},[t._v(t._s(n))]),t._v(" "),t._l(e,function(e){return i("div",{key:e.id,staticClass:"item",on:{click:function(i){t.handleCityClick(e.name)}}},[i("p",{staticClass:"border-bottom"},[t._v(t._s(e.name))])])})],2)})],2)])},staticRenderFns:[]};var v=i("VU/8")(d,f,!1,function(t){i("OhJi")},"data-v-115df79e",null).exports,m={name:"CityAlphabet",props:{cities:Object},data:function(){return{touchStatus:!1,startY:0,timer:null}},updated:function(){this.startY=this.$refs.A[0].offsetTop},mounted:function(){},computed:{letters:function(){var t=[];for(var e in this.cities)t.push(e);return t}},methods:{handleLetterClick:function(t){this.$emit("change",t.target.innerText)},handleLetterStart:function(t){this.touchStatus=!0},handleLetterMove:function(t){var e=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){if(e.touchStatus){var i=t.touches[0].clientY-79,n=Math.floor((i-e.startY)/20);n>=0&&n<e.letters.length&&e.$emit("change",e.letters[n])}},16)},handleLetterEnd:function(t){this.touchStatus=!1}}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{staticClass:"list"},t._l(t.letters,function(e,n){return i("li",{key:n,ref:e,refInFor:!0,staticClass:"item",attrs:{"data-id":n},on:{click:t.handleLetterClick,touchstart:function(e){return e.preventDefault(),t.handleLetterStart(e)},touchmove:t.handleLetterMove,touchend:t.handleLetterEnd}},[t._v(t._s(e))])}))},staticRenderFns:[]};var p=i("VU/8")(m,y,!1,function(t){i("yqfI")},"data-v-96c74b1e",null).exports,C=i("mtWM"),_=i.n(C),k={name:"City",components:{CityHeader:s,CitySearch:o,CityList:v,CityAlphabet:p},data:function(){return{cities:{},hotCities:[],letter:""}},mounted:function(){this.cityAjaxData()},methods:{cityAjaxData:function(){_.a.get("/api/city.json").then(this.cityAjaxDataSuccess)},cityAjaxDataSuccess:function(t){if(t=t.data,console.log(t),t.ret&&t.data){var e=t.data;this.cities=e.cities,this.hotCities=e.hotCities}},handleLetterChange:function(t){this.letter=t}}},w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("city-header"),t._v(" "),i("city-search",{attrs:{cities:t.cities}}),t._v(" "),i("city-list",{attrs:{cities:t.cities,hot:t.hotCities,letter:t.letter}}),t._v(" "),i("city-alphabet",{attrs:{cities:t.cities},on:{change:t.handleLetterChange}})],1)},staticRenderFns:[]};var b=i("VU/8")(k,w,!1,function(t){i("2Msk")},"data-v-20b740d6",null);e.default=b.exports},OhJi:function(t,e){},PcvV:function(t,e){},QnD3:function(t,e){},yqfI:function(t,e){}});
//# sourceMappingURL=3.fe198bcb34c446704192.js.map